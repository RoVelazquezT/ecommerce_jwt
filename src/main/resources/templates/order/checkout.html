<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8">
	<title>Fruitables - Checkout</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta content="" name="keywords">
	<meta content="" name="description">

	<!-- Google Web Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Raleway:wght@600;800&display=swap"
		rel="stylesheet">

	<!-- Icon Font Stylesheet -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

	<!-- Libraries Stylesheet -->
	<link href="lib/lightbox/css/lightbox.min.css" rel="stylesheet">
	<link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


	<!-- Customized Bootstrap Stylesheet -->
	<link href="css/bootstrap.min.css" rel="stylesheet">

	<!-- Template Stylesheet -->
	<link href="css/style.css" rel="stylesheet">
</head>

<body>

	<!-- Spinner Start -->
	<div id="spinner"
		class="show w-100 vh-100 bg-white position-fixed translate-middle top-50 start-50  d-flex align-items-center justify-content-center">
		<div class="spinner-grow text-primary" role="status"></div>
	</div>
	<!-- Spinner End -->


	<!-- Navbar start -->
	<div class="container-fluid fixed-top">
		<div class="container topbar bg-primary d-none d-lg-block">
			<div class="d-flex justify-content-between">
				<div class="top-info ps-2">
					<small class="me-3"><i class="fas fa-map-marker-alt me-2 text-secondary"></i> <a href="#"
							class="text-white">123 Street, New York</a></small>
					<small class="me-3"><i class="fas fa-envelope me-2 text-secondary"></i><a href="#"
							class="text-white">Email@Example.com</a></small>
				</div>
			</div>
		</div>
		<div class="container px-0">
			<nav class="navbar navbar-light bg-white navbar-expand-xl">
				<a th:href="@{/home}" class="navbar-brand">
					<h1 class="text-primary display-6">Fruitables</h1>
				</a>
				<button class="navbar-toggler py-2 px-3" type="button" data-bs-toggle="collapse"
					data-bs-target="#navbarCollapse">
					<span class="fa fa-bars text-primary"></span>
				</button>
				<div class="collapse navbar-collapse bg-white" id="navbarCollapse">

					<div class="navbar-nav mx-auto">
						<a th:href="@{/home}" class="nav-item nav-link active">Home</a>

						<a th:href="@{/shop}" class="nav-item nav-link">Tienda</a>

						<a th:href="@{/testimonial}" class="nav-item nav-link">Testimonios</a>

						<a th:href="@{contact}" class="nav-item nav-link">Contacto</a>


					</div>
					<div class="navbar-nav mx-auto user-links">
						<a th:href="@{/carrito}" class="nav-item nav-link">Carrito</a>

					</div>


					<div class="d-flex m-3 me-0">
						<div class="user-links">
							<a href="#" id="logout-button" class="my-auto">
								<i class="fas fa-sign-out-alt fa-2x"></i>
							</a>
						</div>

						<div class="guest-links">
							<a th:href="@{/register}" class="my-auto me-3">Creá tu cuenta</a>
							<a th:href="@{/login}" class="my-auto">
								<i class="fas fa-user fa-2x"></i>
							</a>
						</div>
					</div>
				</div>
			</nav>
		</div>
	</div>
	<!-- Navbar End -->


	<!-- Single Page Header start -->
	<div class="container-fluid page-header py-5">
		<h1 class="text-center text-white display-6">Checkout</h1>

	</div>
	<!-- Single Page Header End -->


	<!-- Checkout Page Start -->
	<div class="container-fluid py-5">
		<div class="container py-5">
			<h1 class="mb-4">Detalles de facturación</h1>
			<form th:action="@{/checkout}" method="post">
				<div class="row g-5">
					<div class="col-md-12 col-lg-6 col-xl-7">
						<div class="row">
							<div class="col-md-12 col-lg-6">
								<div class="form-item w-100">
									<label class="form-label my-3">Nombre<sup>*</sup></label>
									<input type="text" class="form-control" th:value="${user.firstname}" readonly
										required>
								</div>
							</div>
							<div class="col-md-12 col-lg-6">
								<div class="form-item w-100">
									<label class="form-label my-3">Apellido<sup>*</sup></label>
									<input type="text" class="form-control" th:value="${user.lastname}" readonly
										required>
								</div>
							</div>
						</div>

						<div class="form-item">
							<label class="form-label my-3">Dirección <sup>*</sup></label>
							<input type="text" class="form-control" name="address" placeholder=""
								th:value="${user.address}" required>
						</div>

						<div class="form-item">
							<label class="form-label my-3">Ciudad<sup>*</sup></label>
							<input type="text" class="form-control" name="city" th:value="${user.city}" required>
						</div>

						<div class="form-item">
							<label class="form-label my-3">Código Postal<sup>*</sup></label>
							<input type="text" class="form-control" name="postcode" th:value="${user.postcode}"
								required>
						</div>

						<div class="form-item">
							<label class="form-label my-3">Teléfono<sup>*</sup></label>
							<input type="tel" class="form-control" name="mobile" th:value="${user.movile}" required>
						</div>

						<div class="form-item">
							<textarea name="note" class="form-control my-3" spellcheck="false" cols="30" rows="11"
								placeholder="Nota del Pedido (Opcional)"></textarea>
						</div>
					</div>
					<div class="col-md-12 col-lg-6 col-xl-5">
						<div class="table-responsive">
							<table class="table">
								<thead>
									<tr>
										<th scope="col">Producto</th>
										<th scope="col">Nombre</th>
										<th scope="col">Precio</th>
										<th scope="col">Cantidad</th>
										<th scope="col">Total</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="item : ${cartItems}">
										<th scope="row">
											<div class="d-flex align-items-center mt-2">
												<img th:src="@{/img/} + ${item.product.imageUrl}"
													class="img-fluid rounded-circle" style="width: 90px; height: 90px;"
													th:alt="${item.product.name}">
											</div>
										</th>

										<td class="py-5" th:text="${item.product.name}">Nombre Producto</td>

										<td class="py-5"
											th:text="'$' + ${#numbers.formatDecimal(item.product.price, 1, 2)}">$0.00
										</td>

										<td class="py-5" th:text="${item.quantity}">1</td>

										<td class="py-5"
											th:text="'$' + ${#numbers.formatDecimal(item.product.price * item.quantity, 1, 2)}">
											$0.00</td>
									</tr>
									<tr th:if="${!cartItems.isEmpty()}">
									    <th scope="row"></th>
									    <td class="py-5">
									        <p class="mb-0 text-dark py-3">Envio</p>
									    </td>
									    <td class="py-5"></td>
									    <td class="py-5"></td>
									    <td class="py-5">
									        <div class="py-3 border-bottom border-top">
									            <p class="mb-0 text-dark">
									                $ 3.00
									            </p>
									        </div>
									    </td>
									</tr>

									<tr>
									    <th scope="row"></th>
									    <td class="py-5">
									        <p class="mb-0 text-dark text-uppercase py-3">TOTAL</p>
									    </td>
									    <td class="py-5"></td>
									    <td class="py-5"></td>
									    <td class="py-5">
									        <div class="py-3 border-bottom border-top">
									            <p class="mb-0 text-dark"
									               th:text="'$' + ${#numbers.formatDecimal(cartItems.isEmpty() ? totalPrice : totalPrice + 3.00, 1, 2)}">
									               $0.00
									            </p>
									        </div>
									    </td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
							<div class="col-12">
								<div class="form-check text-start my-3">
									<input type="radio" class="form-check-input bg-primary border-0" id="Transfer-1"
										name="paymentMethod" value="TRANSFER" checked>
									<label class="form-check-label" for="Transfer-1">Transferencia bancaria
										directa</label>
								</div>
								<p class="text-start text-dark">Realice el pago directamente en nuestra cuenta bancaria.
									Utilice su número de pedido como referencia de pago. Su pedido no se enviará hasta
									que los fondos hayan sido ingresados en nuestra cuenta.</p>
							</div>
						</div>
						<div class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
							<div class="col-12">
								<div class="form-check text-start my-3">
									<input type="radio" class="form-check-input bg-primary border-0" id="Delivery-1"
										name="paymentMethod" value="Delivery">
									<label class="form-check-label" for="Delivery-1">Pago contra reembolso</label>
								</div>
							</div>
						</div>
						<div class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
							<div class="col-12">
								<div class="form-check text-start my-3">
									<input type="radio" class="form-check-input bg-primary border-0" id="Paypal-1"
										name="paymentMethod" value="MercadoPago">
									<label class="form-check-label" for="Paypal-1">MercadoPago</label>
								</div>
							</div>
						</div>
						<div class="row g-4 text-center align-items-center justify-content-center pt-4">
							<button type="submit"
								class="btn border-secondary py-3 px-4 text-uppercase w-100 text-primary">Realizar
								Pedido</button>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
	<!-- Checkout Page End -->

	<!-- Modal -->
	<div class="modal fade" id="emptyCartModal" tabindex="-1" aria-labelledby="emptyCartLabel" aria-hidden="true">
	    <div class="modal-dialog modal-dialog-centered">
	        <div class="modal-content">
	            <div class="modal-header bg-warning text-dark">
	                <h5 class="modal-title" id="emptyCartLabel">¡Atención!</h5>
	                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	            </div>
	            <div class="modal-body text-center py-5">
	                <div class="mb-4">
	                    <i class="fas fa-shopping-basket text-warning fa-5x"></i>
	                </div>
	                <h3>Tu carrito está vacío</h3>
	                <p class="mb-4">No puedes realizar un pedido sin productos.</p>
	                <p>Por favor, añade algunos productos antes de continuar.</p>
	            </div>
	            <div class="modal-footer justify-content-center">
	                <button type="button" class="btn btn-secondary rounded-pill px-4" data-bs-dismiss="modal">Cerrar</button>
	                
	                <a th:href="@{/shop}" class="btn btn-primary rounded-pill px-4">Ir a la Tienda</a>
	            </div>
	        </div>
	    </div>
	</div>

	<div th:if="${orderSuccess}" id="trigger-order-success"></div>


	<!-- Copyright Start -->
	<div class="container-fluid copyright bg-dark py-4">
		<div class="container">
			<div class="row">
				<div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
					<span class="text-light"><a href="#"><i class="fas fa-copyright text-light me-2"></i>Fruitables</a>, All right reserved.</span>
				</div>
				
			</div>
		</div>
	</div>
	<!-- Copyright End -->



	<!-- Back to Top -->
	<a href="#" class="btn btn-primary border-3 border-primary rounded-circle back-to-top"><i
			class="fa fa-arrow-up"></i></a>


	<!-- JavaScript Libraries -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
	<script src="lib/easing/easing.min.js"></script>
	<script src="lib/waypoints/waypoints.min.js"></script>
	<script src="lib/lightbox/js/lightbox.min.js"></script>
	<script src="lib/owlcarousel/owl.carousel.min.js"></script>

	<script th:src="@{/js/main.js}"></script>
	<script th:src="@{/js/cart.js}"></script>
</body>

</html>